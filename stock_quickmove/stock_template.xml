<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="stock_quickmove.webapp" name="Quick Move">
            <t t-call="website.layout">
                <div id="wrap" class="oe_structure oe_empty">
                    <section class="mt16 mb16">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-12 mt16 mb32">
                                    <t t-if="previous_picking_id">
                                        <t t-set="previous_picking" t-value="request.env['stock.picking'].browse(int(previous_picking_id))"/>
                                        <t t-set="previous_picking_alert" t-value="'secondary'"/>
                                        <t t-set="previous_picking_state_label" t-value="'default'"/>
                                        <t t-if="previous_picking.state == 'draft'">
                                            <t t-set="previous_picking_alert" t-value="'secondary'"/>
                                            <t t-set="previous_picking_state_label" t-value="'default'"/>
                                        </t>
                                        <t t-if="previous_picking.state == 'waiting'">
                                            <t t-set="previous_picking_alert" t-value="'info'"/>
                                            <t t-set="previous_picking_state_label" t-value="'info'"/>
                                        </t>
                                        <t t-if="previous_picking.state == 'confirmed'">
                                            <t t-set="previous_picking_alert" t-value="'primary'"/>
                                            <t t-set="previous_picking_state_label" t-value="'primary'"/>
                                        </t>
                                        <t t-if="previous_picking.state == 'partially_available'">
                                            <t t-set="previous_picking_alert" t-value="'warning'"/>
                                            <t t-set="previous_picking_state_label" t-value="'warning'"/>
                                        </t>
                                        <t t-if="previous_picking.state == 'assigned'">
                                            <t t-set="previous_picking_alert" t-value="'primary'"/>
                                            <t t-set="previous_picking_state_label" t-value="'primary'"/>
                                        </t>
                                        <t t-if="previous_picking.state == 'done'">
                                            <t t-set="previous_picking_alert" t-value="'success'"/>
                                            <t t-set="previous_picking_state_label" t-value="'success'"/>
                                        </t>
                                        <t t-if="previous_picking.state == 'cancel'">
                                            <t t-set="previous_picking_alert" t-value="'danger'"/>
                                            <t t-set="previous_picking_state_label" t-value="'danger'"/>
                                        </t>
                                        <div t-att-class="'col-md-12 alert alert-%s' %previous_picking_alert" role="alert">
                                            <h2 class="text-center">Last Picking: <a t-att-href="'/web#id=%s&amp;view_type=form&amp;model=stock.picking&amp;active_id=%s' %(previous_picking.id, previous_picking.picking_type_id.id)" target="_blank"><h2 t-esc="previous_picking.name"/></a></h2>
                                            <h4 class="text-center"><span t-att-class="'label label-%s' %previous_picking_state_label" t-field="previous_picking.state"/></h4>
                                        </div>
                                    </t>
                                    <t t-if="picking">
                                        <form t-att-action="'/stock/quickmove/picking/%s' %picking.id if picking else ''" method="post" class="form-horizontal mt32" enctype="multipart/form-data">
                                            <input name="picking_type_id" type="hidden" t-att-value="picking.picking_type_id.id"/>
                                            <div class="mb32">
                                                <a t-att-href="'/web#id=%s&amp;view_type=form&amp;model=stock.picking&amp;active_id=%s' %(picking.id, picking.picking_type_id.id)" target="_blank"><h2 t-esc="picking.name"/></a>
                                                <t t-if="picking.state == 'draft'"><span t-field="picking.state" class="label label-default"/></t>
                                                <t t-if="picking.state == 'waiting'"><span t-field="picking.state" class="label label-info"/></t>
                                                <t t-if="picking.state == 'confirmed'"><span t-field="picking.state" class="label label-primary"/></t>
                                                <t t-if="picking.state == 'partially_available'"><span t-field="picking.state" class="label label-warning"/></t>
                                                <t t-if="picking.state == 'assigned'"><span t-field="picking.state" class="label label-primary"/></t>
                                                <t t-if="picking.state == 'done'"><span t-field="picking.state" class="label label-success"/></t>
                                                <t t-if="picking.state == 'cancel'"><span t-field="picking.state" class="label label-danger"/></t>
                                            </div>
                                            <div t-attf-class="form-group #{error and 'description' in error and 'has-error' or ''}">
                                                <label class="col-md-3 col-sm-4 col-xs-12 control-label pull-left" for="description">Description</label>
                                                <div class="col-md-7 col-sm-8 col-xs-12">
                                                    <input type="text" class="form-control" name="description" t-attf-value="#{picking.name or ''}" onkeypress="if(event.keyCode == 13) {return false;}" required="1" />
                                                </div>
                                            </div>
                                            <div t-attf-class="form-group #{error and 'location_src_id' in error and 'has-error' or ''}">
                                                <label class="col-md-3 col-sm-4 col-xs-12 control-label pull-left" for="location_src_id">From</label>
                                                <div class="col-md-7 col-sm-8 col-xs-12">
                                                    <input type="hidden" class="form-control" name="location_src_id" t-att-value="str(picking.move_lines[0].location_id.id) if len(picking.move_lines) &gt; 0 else '0'" />
                                                    <input id="quickmove_location_src_id" class="form-control" name="location_src_id" t-att-value="picking.move_lines[0].location_id.name if len(picking.move_lines) &gt; 0 else 'Scan the source location tag'" disabled="disabled" required="1" />
                                                </div>
                                            </div>
                                            <div t-attf-class="form-group #{error and 'location_dest_id' in error and 'has-error' or ''}">
                                                <label class="col-md-3 col-sm-4 col-xs-12 control-label pull-left" for="location_dest_id">To</label>
                                                <div class="col-md-7 col-sm-8 col-xs-12">
                                                    <input type="hidden" class="form-control" name="location_dest_id" t-att-value="str(picking.move_lines[0].location_dest_id.id) if len(picking.move_lines) &gt; 0 else '0'" />
                                                    <input id="quickmove_location_dest_id" class="form-control" name="location_dest_id" t-att-value="picking.move_lines[0].location_dest_id.name if len(picking.move_lines) &gt; 0 else  'Scan the destination location tag'" disabled="disabled" required="1" />
                                                </div>
                                            </div>
                                            <table class="table table-condensed">
                                                <thead>
                                                    <tr>
                                                        <th class="text-left">Product</th>
                                                        <th class="text-center" style="width: 150px;">Quantity</th>
                                                        <th style="width: 30px;"/>
                                                    </tr>
                                                </thead>
                                                <tbody id="quickmove_product_lines">
                                                    <t t-foreach="picking.move_lines" t-as="line">
                                                        <tr t-att-data-id="line.product_id.id">
                                                            <td>
                                                                <p class="text-left quickmove_product_name"><t t-esc="line.product_id.display_name"/></p>
                                                            </td>
                                                            <td style="width: 150px;">
                                                                <div class="input-group">
                                                                    <span class="input-group-addon quickmove_minus input-sm" t-att-data-product-id="line.product_id.id" onclick="quickmove_minus($(this));"><a href="#"><i class="fa fa-minus"/></a></span>
                                                                    <input class="form-control text-center quickmove_qty" t-att-name="'product_qty_%s' %line.product_id.id" type="text" t-att-value="int(line.product_uom_qty)" onkeypress="if (event.keyCode == 13) {return false;}" />
                                                                    <span class="input-group-addon quickmove_plus input-sm" t-att-data-product-id="line.product_id.id" onclick="quickmove_plus($(this));"><a href="#"><i class="fa fa-plus"/></a></span>
                                                                </div>
                                                            </td>
                                                            <t t-if="picking.state == 'draft'">
                                                                <td style="width: 30px;">
                                                                    <i class="fa fa-trash fa-2x text-primary" onclick="quickmove_remove($(this));"/>
                                                                </td>
                                                            </t>
                                                            <t t-if="picking.state != 'draft'">
                                                                <td style="width: 30px;" />
                                                            </t>
                                                        </tr>
                                                    </t>
                                                </tbody>
                                            </table>
                                            <div class="col-md-6 col-sm-6 col-xs-12 mt32" style="padding: 0px;">
                                                <select id="quickmove_product_search" class="form-control" style="width: 100%;" />
                                            </div>
                                            <div class="form-group">
                                                <div class="col-md-12 col-sm-12 col-xs-12 mt48">
                                                    <button class="btn btn-primary btn-lg pull-right">Transfer</button>
                                                </div>
                                            </div>
                                        </form>
                                    </t>
                                    <t t-if="not picking">
                                        <form action="/stock/quickmove" method="post" class="form-horizontal mt32" enctype="multipart/form-data">
                                            <input name="picking_type_id" type="hidden" t-att-value="picking_type_id"/>
                                            <div t-attf-class="form-group #{error and 'description' in error and 'has-error' or ''}">
                                                <label class="col-md-3 col-sm-4 col-xs-12 control-label pull-left" for="description">Description</label>
                                                <div class="col-md-7 col-sm-8 col-xs-12">
                                                    <input type="text" class="form-control" name="description" t-attf-value="#{description or ''}" onkeypress="if(event.keyCode == 13) {return false;}" required="1" />
                                                </div>
                                            </div>
                                            <div t-attf-class="form-group #{error and 'location_src_id' in error and 'has-error' or ''}">
                                                <label class="col-md-3 col-sm-4 col-xs-12 control-label pull-left" for="location_src_id">From</label>
                                                <div class="col-md-7 col-sm-8 col-xs-12">
                                                    <select id="quickmove_location_src_id" class="form-control" name="location_src_id" style="width: 100%;" required="1" />
                                                </div>
                                            </div>
                                            <div t-attf-class="form-group #{error and 'location_dest_id' in error and 'has-error' or ''}">
                                                <label class="col-md-3 col-sm-4 col-xs-12 control-label pull-left" for="location_dest_id">To</label>
                                                <div class="col-md-7 col-sm-8 col-xs-12">
                                                    <select id="quickmove_location_dest_id" class="form-control" name="location_dest_id" style="width: 100%;" required="1" />
                                                </div>
                                            </div>
                                            <table class="table table-condensed">
                                                <thead>
                                                    <tr>
                                                        <th class="text-left">Product</th>
                                                        <th class="text-center" style="width: 150px;">Quantity</th>
                                                        <th style="width: 30px;"/>
                                                    </tr>
                                                </thead>
                                                <tbody id="quickmove_product_lines"/>
                                            </table>
                                            <div class="col-md-6 col-sm-6 col-xs-12 mt32" style="padding: 0px;">
                                                <select id="quickmove_product_search" class="form-control" style="width: 100%;" />
                                            </div>
                                            <div class="form-group">
                                                <div class="col-md-12 col-sm-12 col-xs-12 mt48">
                                                    <button class="btn btn-primary btn-lg pull-right">Transfer</button>
                                                </div>
                                            </div>
                                        </form>
                                    </t>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </t>
        </template>
        <template id="stock_quickmove_assets_frontend" name="Stock Quickmove Assets Frontend" inherit_id="website.assets_frontend">
            <xpath expr="." position="inside">
                <link href="/stock_quickmove/static/src/css/main.css" rel="stylesheet" />
                <script src="/stock_quickmove/static/src/js/main.js" type="text/javascript" />
            </xpath>
        </template>
        <template id="stock_quickmove_barcode_index" name="Stock Quickmove Barcode Index" inherit_id="stock.barcode_index">
            <xpath expr="." position="inside">
                <link href="/stock_quickmove/static/src/css/barcode.css" rel="stylesheet" />
            </xpath>
        </template>
    </data>
</openerp>
